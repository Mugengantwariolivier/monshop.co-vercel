<!doctype html>
<html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>MonShop with data.json</title><link rel="icon" href="logo.jpg"/><script src="https://cdn.tailwindcss.com"></script><script src="https://unpkg.com/dexie@4.0.7/dist/dexie.min.js"></script></head><body><h1>MonShop (minimal) - open console for messages</h1><script type="module">
const db = new Dexie('monshop_auth_db'); db.version(1).stores({users:'++id,username,role', items:'++id,name,sku', sales:'++id,date,client,itemName'});
async function trySeedFromDataJson(){ try{ const cnt = await db.users.count() + await db.items.count() + await db.sales.count(); if(cnt>0){ console.log('DB not empty; skip seeding.'); return; } const res = await fetch('data.json'); if(!res.ok){ console.log('No data.json'); return; } const j = await res.json(); if(j.users) await Promise.all(j.users.map(u=>db.users.add(u))); if(j.items) await Promise.all(j.items.map(i=>db.items.add(i))); if(j.sales) await Promise.all(j.sales.map(s=>db.sales.add(s))); console.log('Seeded DB from data.json'); }catch(e){ console.error('Seed error', e); } }
async function seedAdmin(){ const c = await db.users.count(); if(c===0){ // create admin with password hash of '1234' using Web Crypto in-browser
  const enc = new TextEncoder(); const digest = await crypto.subtle.digest('SHA-256', enc.encode('1234')); const b = btoa(String.fromCharCode(...new Uint8Array(digest))); await db.users.add({username:'admin', password:b, role:'admin'}); console.log('Seeded fallback admin'); } }
await trySeedFromDataJson(); await seedAdmin(); console.log('Ready');</script></body></html>